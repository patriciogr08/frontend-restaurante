<ion-header>
  <ion-toolbar>
    <ion-title>{{ producto ? 'Editar producto' : 'Nuevo producto' }}</ion-title>
    <ion-buttons slot="end"><ion-button (click)="close()">Cerrar</ion-button></ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
    <form [formGroup]="form" (ngSubmit)="submit()">
        <ion-item>
            <ion-label position="stacked">Tipo</ion-label>
            <ion-select formControlName="tipoProductoId" interface="popover">
                @for (t of tipos; track t.id) { <ion-select-option [value]="t.id">{{t.nombre}}</ion-select-option> }
            </ion-select>
        </ion-item>

        <ion-item><ion-label position="stacked">Nombre</ion-label><ion-input formControlName="nombre"></ion-input></ion-item>
        <ion-item><ion-label position="stacked">Descripción</ion-label><ion-textarea formControlName="descripcion" autoGrow></ion-textarea></ion-item>
        <ion-item><ion-label position="stacked">Precio</ion-label><ion-input type="number" formControlName="precio"></ion-input></ion-item>

        <ion-item lines="full" class="ion-margin-top">
            <ion-label>¿Tiene descuento?</ion-label>
            <ion-toggle formControlName="tieneDescuento"></ion-toggle>
        </ion-item>

        <div class="grid-2">
            <ion-item>
                <ion-label position="stacked">% Descuento</ion-label>
                <ion-input type="number" formControlName="descuentoPorcentaje"></ion-input>
            </ion-item>
            <ion-item>
                <ion-label position="stacked">Valor descuento</ion-label>
                <ion-input type="number" formControlName="descuentoValor"></ion-input>
            </ion-item>
        </div>

        <ion-note class="hint">Si el descuento está desactivado, estos campos quedan bloqueados.</ion-note>

        <ion-button expand="block" type="submit" class="ion-margin-top">
            {{ producto ? 'Guardar cambios' : 'Crear' }}
        </ion-button>
    </form>
</ion-content>
